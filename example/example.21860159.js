parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Xyu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.snapToPixel=exports.restrictToBounds=exports.lerpVector=exports.lerpScalar=exports.ease=exports.createMatrix4=void 0;const t=()=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];exports.createMatrix4=t;const e=t=>-(Math.cos(Math.PI*t)-1)/2;function o(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;const r=e-t;return r<(arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001)?e:t+r*o}function r(t,e,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;const n=e-t.x,p=o-t.y;Math.sqrt(Math.pow(n,2)+Math.pow(p,2))<s?(t.x=e,t.y=o):(t.x+=n*r,t.y+=p*r)}function s(t,e,o,r){const s=o-e;return s<=r?e+.5*s:t<(e+=.5*r)?e:t>(o-=.5*r)?o:t}function n(t,e,o){const r=t*o;return(e%2==0?Math.round(r):Math.round(r+.5)-.5)/o}exports.ease=e,exports.lerpScalar=o,exports.lerpVector=r,exports.restrictToBounds=s,exports.snapToPixel=n;
},{}],"GFEx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=void 0;const t=require("./utils");class i{constructor(){this.x=0,this.y=0,this.bounds=null,this.snapToPixel=!0,this.projection=t.createMatrix4(),this.modelView=t.createMatrix4(),this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projection[10]=-1,this.projection[14]=-1,this.projection[15]=1,this.modelView[0]=1,this.modelView[5]=-1,this.modelView[10]=-1,this.modelView[15]=1}getX(){return this.x}getY(){return this.y}getZoom(){return this.zoom}getViewportWidth(){return this.viewportWidth}getViewportHeight(){return this.viewportHeight}setZoom(t){this.zoom=t,this.updateProjection()}setPosition(i,e){if(this.bounds){const{xMin:o,xMax:s,yMin:h,yMax:r}=this.bounds;i=t.restrictToBounds(i,o,s,this.viewportWidth/this.zoom),e=t.restrictToBounds(e,h,r,this.viewportHeight/this.zoom)}this.x=i,this.y=e,this.snapToPixel?(this.modelView[12]=-t.snapToPixel(i,this.viewportWidth,this.zoom),this.modelView[13]=t.snapToPixel(e,this.viewportHeight,this.zoom)):(this.modelView[12]=-i,this.modelView[13]=e)}moveTo(t,i){this.setPosition(t,i)}resize(t,i){this.viewportWidth=t,this.viewportHeight=i,this.updateProjection()}updateProjection(){this.projection[0]=2*this.zoom/this.viewportWidth,this.projection[5]=2*this.zoom/this.viewportHeight}setBounds(t){this.bounds=t,this.setPosition(this.x,this.y)}getBounds(){return this.bounds}}exports.Camera=i;
},{"./utils":"Xyu5"}],"iplB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScreenCamera=void 0;const e=require("./Camera");class r extends e.Camera{resize(e,r){super.resize(e,r),this.setPosition(e/2,r/2)}}exports.ScreenCamera=r;
},{"./Camera":"GFEx"}],"nRKb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FollowingCamera=void 0;const s=require("./Camera");class e extends s.Camera{constructor(){super(...arguments),this.desired={x:0,y:0},this.speed=0,this.maxSpeed=900,this.acceleration=20,this.slowDistance=100,this.lockDistance=1}getDesired(){return this.desired}getSpeed(){return this.speed}update(s){const e=this.desired.x-this.x,t=this.desired.y-this.y,i=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));if(0!==i)if(i<this.slowDistance){const h=i/this.slowDistance;this.speed=Math.max(.1,h)*this.maxSpeed;const d=s*this.speed/i,o=e*d,r=t*d;i-Math.sqrt(Math.pow(o,2)+Math.pow(r,2))<=this.lockDistance?(this.speed=0,this.setPosition(this.desired.x,this.desired.y)):this.setPosition(this.x+o,this.y+r)}else{this.speed<this.maxSpeed&&(this.speed=Math.min(this.maxSpeed,this.speed+this.maxSpeed*this.acceleration*s));const h=s*this.speed/i;this.setPosition(this.x+e*h,this.y+t*h)}}moveInstantly(){this.setPosition(this.desired.x,this.desired.y)}moveTo(s,e){this.desired.x=s,this.desired.y=e}resize(s,e){super.resize(s,e),this.setPosition(this.desired.x,this.desired.y)}}exports.FollowingCamera=e;
},{"./Camera":"GFEx"}],"PpbR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfluencedCamera=void 0;const e=require("./Camera"),t=require("./utils");class s extends e.Camera{constructor(){super(),this.cueConfigs=[],this.target=null,this.offset={x:0,y:0},this.finalOffset={x:0,y:0},this.finalZoom=1,this.savedZoom=this.zoom}getOffset(){return this.offset}setZoom(e){this.savedZoom=e}updateZoom(e){e=t.lerpScalar(this.zoom,e),this.zoom!==e&&super.setZoom(e)}addCue(e){this.cueConfigs.push({cue:e,fadeTime:0,totalFadeTime:0,influence:1}),this.update(0)}removeCue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t>0){const s=this.cueConfigs.find(t=>t.cue===e);s&&!s.totalFadeTime&&(s.cue=Object.assign({},e),s.fadeTime=t,s.totalFadeTime=t)}else{const t=this.cueConfigs.findIndex(t=>t.cue===e);t>=0&&this.cueConfigs.splice(t,1)}}removeAllCues(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>0)for(const t of this.cueConfigs)t.totalFadeTime||(t.cue=Object.assign({},t.cue),t.fadeTime=e,t.totalFadeTime=e);else this.cueConfigs.length=0}setTarget(e){e&&this.target&&(this.offset.x+=this.target.x-e.x,this.offset.y+=this.target.y-e.y),this.target=e}getTarget(){return this.target}updateInfluences(){if(!this.target)return;let e=0,s=0,i=0,o=0,a=0;for(const c of this.cueConfigs){const{x:n,y:f}=c.cue,h=n-this.target.x,u=f-this.target.y,r=Math.sqrt(Math.pow(h,2)+Math.pow(u,2));if(r<c.cue.outerRadius){const{outerRadius:n,innerRadius:f}=c.cue,l=n-f,d=r-f,m=(d<=0?1:1-t.ease(d/l))*c.influence;i+=m,m>s&&(s=m),o+=h*m,a+=u*m,e+=(1-c.cue.zoom)*m}}t.lerpVector(this.offset,0,0);let{x:n,y:f}=this.offset;const h=s/i;h&&(n+=o*h,f+=a*h);const{aims:u}=this.target,r=1-s;if(0!==u.length&&r){let e=0,t=0;for(const i of u){i.update();const s=i.get();e+=s.x,t+=s.y}const s=1/u.length;n+=e*s*r,f+=t*s*r}else for(const t of u)t.update();this.finalOffset.x=n,this.finalOffset.y=f,this.finalZoom=this.savedZoom*this.target.zoom*(h?1-e*h:1)}update(e){this.updateFadingCues(e),this.target?(this.updateInfluences(),this.updateZoom(this.finalZoom),this.setPosition(this.target.x+this.finalOffset.x,this.target.y+this.finalOffset.y)):this.updateZoom(this.savedZoom)}updateFadingCues(e){for(let t=this.cueConfigs.length-1;t>=0;t--){const s=this.cueConfigs[t];s.totalFadeTime&&(s.fadeTime-=e,s.fadeTime<=0?this.cueConfigs.splice(t,1):s.influence=s.fadeTime/s.totalFadeTime)}}resize(e,t){super.resize(e,t),this.setPosition(this.x,this.y)}moveTo(){throw new Error("moveTo is not supported on InfluencedCamera at this time.")}}exports.InfluencedCamera=s;
},{"./Camera":"GFEx","./utils":"Xyu5"}],"Xsho":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AimInfluence=void 0;const t=require("./utils"),e=.001;class s{constructor(t){var e,s;this.offset={x:0,y:0},this.desiredOffset={x:0,y:0},this.maxLength=t.maxLength,this.factor=null!==(e=t.factor)&&void 0!==e?e:1,this.lerpFactor=null!==(s=t.lerpFactor)&&void 0!==s?s:1}get(){return this.offset}set(t,s){if(this.maxLength<=0||0===this.factor)this.desiredOffset.x=0,this.desiredOffset.y=0;else{t*=this.factor,s*=this.factor;const i=Math.sqrt(Math.pow(t,2)+Math.pow(s,2));if(i<e)this.desiredOffset.x=0,this.desiredOffset.y=0;else{if(i>this.maxLength){const e=this.maxLength/i;t*=e,s*=e}this.desiredOffset.x=t,this.desiredOffset.y=s}}1===this.lerpFactor&&(this.offset.x=this.desiredOffset.x,this.offset.y=this.desiredOffset.y)}update(){this.lerpFactor<1&&t.lerpVector(this.offset,this.desiredOffset.x,this.desiredOffset.y,this.lerpFactor)}}exports.AimInfluence=s;
},{"./utils":"Xyu5"}],"gkAU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"fUdq":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||e(t,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./Camera"),exports),r(require("./ScreenCamera"),exports),r(require("./FollowingCamera"),exports),r(require("./InfluencedCamera"),exports),r(require("./AimInfluence"),exports),r(require("./types"),exports),r(require("./utils"),exports);
},{"./Camera":"GFEx","./ScreenCamera":"iplB","./FollowingCamera":"nRKb","./InfluencedCamera":"PpbR","./AimInfluence":"Xsho","./types":"gkAU","./utils":"Xyu5"}],"eKDL":[function(require,module,exports) {
"use strict";function o(o){return[parseInt(o.substr(0,2),16)/255,parseInt(o.substr(2,2),16)/255,parseInt(o.substr(4,2),16)/255,1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.influencedModecolors=exports.followingModeColors=exports.defaultColors=exports.namedColors=exports.BOUND_DISTANCE=exports.AIM_SIZE=exports.PLAYER_SIZE=exports.PLAYER_SPEED=exports.ROCKET_SCALE=exports.ROCKET_PREVIEW_SCALE=exports.ROCKET_PREVIEW_OFFSET=exports.ROCKET_SIZE=exports.ROCKET_SPEED=exports.BG_HEIGHT=exports.BG_WIDTH=exports.WORLD_CENTER_Y=exports.WORLD_CENTER_X=exports.WORLD_BOUNDS=exports.WORLD_HEIGHT=exports.WORLD_WIDTH=exports.SCREEN_HEIGHT=exports.SCREEN_WIDTH=exports.RAD_TO_DEG=exports.DEG_TO_RAD=void 0,exports.DEG_TO_RAD=Math.PI/180,exports.RAD_TO_DEG=180/Math.PI,exports.SCREEN_WIDTH=854,exports.SCREEN_HEIGHT=480,exports.WORLD_WIDTH=6500,exports.WORLD_HEIGHT=2889,exports.WORLD_BOUNDS={xMin:0,yMin:0,xMax:exports.WORLD_WIDTH,yMax:exports.WORLD_HEIGHT},exports.WORLD_CENTER_X=exports.WORLD_WIDTH/2,exports.WORLD_CENTER_Y=exports.WORLD_HEIGHT/2,exports.BG_WIDTH=.75*exports.WORLD_WIDTH,exports.BG_HEIGHT=.75*exports.WORLD_HEIGHT,exports.ROCKET_SPEED=1400,exports.ROCKET_SIZE=32,exports.ROCKET_PREVIEW_OFFSET=100,exports.ROCKET_PREVIEW_SCALE=.4,exports.ROCKET_SCALE=.5,exports.PLAYER_SPEED=800,exports.PLAYER_SIZE=64,exports.AIM_SIZE=32,exports.BOUND_DISTANCE=exports.PLAYER_SIZE,exports.namedColors={RED:o("bb2222"),GREEN:o("009900"),CYAN:o("44dddd"),WHITE:o("ffffff"),PINK:o("ff66ff"),OLIVE:o("bbbb22")},exports.defaultColors={CAMERA:exports.namedColors.RED},exports.followingModeColors={CAMERA_DESIRED:exports.namedColors.GREEN,SLOW_DISTANCE:exports.namedColors.CYAN},exports.influencedModecolors={TARGET_PROJECTED:exports.namedColors.WHITE,TARGET_AIM:exports.namedColors.CYAN,OFFSET:exports.namedColors.GREEN,CUE_INNER:exports.namedColors.PINK,CUE_OUTER:exports.namedColors.OLIVE};
},{}],"BqaH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factoriesGl1=void 0,exports.factoriesGl1={uniform1f:(t,i)=>({location:i,set:r=>t.uniform1f(i,r),setV:r=>t.uniform1fv(i,r)}),uniform2f:(t,i)=>({location:i,set:(r,e)=>t.uniform2f(i,r,e),setV:r=>t.uniform2fv(i,r)}),uniform3f:(t,i)=>({location:i,set:(r,e,o)=>t.uniform3f(i,r,e,o),setV:r=>t.uniform3fv(i,r)}),uniform4f:(t,i)=>({location:i,set:(r,e,o,f)=>t.uniform4f(i,r,e,o,f),setV:r=>t.uniform4fv(i,r)}),uniform1i:(t,i)=>({location:i,set:r=>t.uniform1i(i,r),setV:r=>t.uniform1iv(i,r)}),uniform2i:(t,i)=>({location:i,set:(r,e)=>t.uniform2i(i,r,e),setV:r=>t.uniform2iv(i,r)}),uniform3i:(t,i)=>({location:i,set:(r,e,o)=>t.uniform3i(i,r,e,o),setV:r=>t.uniform3iv(i,r)}),uniform4i:(t,i)=>({location:i,set:(r,e,o,f)=>t.uniform4i(i,r,e,o,f),setV:r=>t.uniform4iv(i,r)}),uniformMatrix2f:(t,i)=>({location:i,set:(r,e)=>t.uniformMatrix2fv(i,r,e)}),uniformMatrix3f:(t,i)=>({location:i,set:(r,e)=>t.uniformMatrix3fv(i,r,e)}),uniformMatrix4f:(t,i)=>({location:i,set:(r,e)=>t.uniformMatrix4fv(i,r,e)}),vertexAttrib1f:(t,i)=>({location:i,set:r=>t.vertexAttrib1f(i,r),setV:r=>t.vertexAttrib1fv(i,r)}),vertexAttrib2f:(t,i)=>({location:i,set:(r,e)=>t.vertexAttrib2f(i,r,e),setV:r=>t.vertexAttrib2fv(i,r)}),vertexAttrib3f:(t,i)=>({location:i,set:(r,e,o)=>t.vertexAttrib3f(i,r,e,o),setV:r=>t.vertexAttrib3fv(i,r)}),vertexAttrib4f:(t,i)=>({location:i,set:(r,e,o,f)=>t.vertexAttrib4f(i,r,e,o,f),setV:r=>t.vertexAttrib4fv(i,r)}),vertexAttribPointer:(t,i)=>({location:i,enable:()=>t.enableVertexAttribArray(i),disable:()=>t.disableVertexAttribArray(i),set:(r,e,o,f,n)=>t.vertexAttribPointer(i,r,e,o,f,n)})};
},{}],"ReWo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.factoriesGl2=void 0;const i=require("./webgl1");exports.factoriesGl2=Object.assign(Object.assign({},i.factoriesGl1),{uniform1ui:(i,t)=>({location:t,set:r=>i.uniform1ui(t,r),setV:(r,e,o)=>i.uniform1uiv(t,r,e,o)}),uniform2ui:(i,t)=>({location:t,set:(r,e)=>i.uniform2ui(t,r,e),setV:(r,e,o)=>i.uniform2uiv(t,r,e,o)}),uniform3ui:(i,t)=>({location:t,set:(r,e,o)=>i.uniform3ui(t,r,e,o),setV:(r,e,o)=>i.uniform3uiv(t,r,e,o)}),uniform4ui:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniform4ui(t,r,e,o,n),setV:(r,e,o)=>i.uniform4uiv(t,r,e,o)}),uniformMatrix2x3f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix2x3fv(t,r,e,o,n)}),uniformMatrix2x4f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix2x4fv(t,r,e,o,n)}),uniformMatrix3x2f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix3x2fv(t,r,e,o,n)}),uniformMatrix3x4f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix3x4fv(t,r,e,o,n)}),uniformMatrix4x2f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix4x2fv(t,r,e,o,n)}),uniformMatrix4x3f:(i,t)=>({location:t,set:(r,e,o,n)=>i.uniformMatrix4x3fv(t,r,e,o,n)}),vertexAttribDivisor:(i,t)=>({location:t,set:r=>i.vertexAttribDivisor(t,r)}),vertexAttribI4i:(i,t)=>({location:t,set:(r,e,o,n)=>i.vertexAttribI4i(t,r,e,o,n),setV:r=>i.vertexAttribI4iv(t,r)}),vertexAttribI4ui:(i,t)=>({location:t,set:(r,e,o,n)=>i.vertexAttribI4ui(t,r,e,o,n),setV:r=>i.vertexAttribI4uiv(t,r)}),vertexAttribIPointer:(i,t)=>({location:t,enable:()=>i.enableVertexAttribArray(t),disable:()=>i.disableVertexAttribArray(t),set:(r,e,o,n)=>i.vertexAttribIPointer(t,r,e,o,n)})});
},{"./webgl1":"BqaH"}],"V8tp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createShaderProgram=exports.glsl=void 0;const e=require("./webgl2");function r(e,...r){let t="";for(let o=0;o<r.length;o++)t+=e[o],t+=r[o];return t.replace(/^[\r\n]+/,"")+e[e.length-1]}function t(e,r,t,o){const a=e.createShader(t);return e.shaderSource(a,o),e.compileShader(a),e.attachShader(r,a),a}function o(r,o,a,s){const n=r.createProgram(),c={},l=t(r,n,r.VERTEX_SHADER,o),i=t(r,n,r.FRAGMENT_SHADER,a);r.linkProgram(n),r.useProgram(n);for(const t of Object.keys(s)){const o=s[t],a=e.factoriesGl2[o];if(!a)throw new Error(`Can't handle ${o}!`);const l=o.startsWith("uniform")?r.getUniformLocation(n,t):r.getAttribLocation(n,t);c[t]=a(r,l)}return Object.assign(Object.assign({},c),{use(){r.useProgram(n)},dispose(){r.useProgram(null),r.deleteShader(i),r.deleteShader(l),r.deleteProgram(n)}})}exports.glsl=r,exports.createShaderProgram=o;
},{"./webgl2":"ReWo"}],"e1KN":[function(require,module,exports) {
"use strict";var e,r;function t(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDebugShader=void 0;const i=require("typed-glsl"),n=i.glsl(e||(e=t(["\nattribute vec2 position;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvoid main() {\n    gl_Position = uPMatrix * uMVMatrix * vec4(position, 0.0, 1.0);\n}\n"]))),o=i.glsl(r||(r=t(["\nprecision highp float;\nuniform vec4 color;\n\nvoid main() {\n    gl_FragColor = color;\n}\n"])));function a(e){return i.createShaderProgram(e,n,o,{position:"vertexAttribPointer",uMVMatrix:"uniformMatrix4f",uPMatrix:"uniformMatrix4f",color:"uniform4f"})}exports.createDebugShader=a;
},{"typed-glsl":"V8tp"}],"wVJg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sprite=void 0;const t=require("../constants");class e{constructor(t,e,s){this.vertData=new Float32Array(8),this.gl=t,this.shader=e,this.vertBuffer=this.gl.createBuffer(),this.texture=s,this.uvBuffer=this.gl.createBuffer(),this.updateBuffer(this.uvBuffer,new Float32Array([0,1,0,0,1,0,1,1]))}destroy(){this.gl.deleteBuffer(this.vertBuffer),this.gl.deleteBuffer(this.uvBuffer)}set(e,s,r,i,h){const a=r/2,f=i/2,u=-a,l=-f,v=r-a,g=i-f,B=h*t.DEG_TO_RAD,d=Math.cos(B),o=Math.sin(B),n=d*u-o*g+e,A=o*u+d*g+s,R=d*u-o*l+e,D=o*u+d*l+s,F=d*v-o*g+e,c=o*v+d*g+s,T=R+(F-n),p=c-(A-D);let _=0;return this.vertData[_++]=n,this.vertData[_++]=A,this.vertData[_++]=R,this.vertData[_++]=D,this.vertData[_++]=T,this.vertData[_++]=p,this.vertData[_++]=F,this.vertData[_++]=c,this.updateBuffer(this.vertBuffer,this.vertData),this}updateBuffer(t,e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW)}draw(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertBuffer),this.shader.position.enable(),this.shader.position.set(2,this.gl.FLOAT,!1,0,0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvBuffer),this.shader.uv.enable(),this.shader.uv.set(2,this.gl.FLOAT,!1,0,0),this.shader.textureID.set(0),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4)}}exports.Sprite=e;
},{"../constants":"eKDL"}],"T4KM":[function(require,module,exports) {
"use strict";function e(e,t,o,s,i){let r=0,y=0;if(o&&(r+=1),i&&(r-=1),t&&(y-=1),s&&(y+=1),r||y){const t=1/Math.sqrt(Math.pow(r,2)+Math.pow(y,2));e.x=r*t,e.y=y*t}else e.x=0,e.y=0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputController=void 0;class t{constructor(e){this.moveDirection={x:0,y:0},this.aimDirection={x:0,y:0},this.keys={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1,KeyW:!1,KeyA:!1,KeyS:!1,KeyD:!1},window.addEventListener("keyup",e=>this.onKeyUp(e)),window.addEventListener("keydown",e=>this.onKeyDown(e)),window.addEventListener("keypress",t=>{"KeyT"===t.code?e.teleport():"Space"===t.code&&e.shootRocket()})}onKeyDown(e){e.code in this.keys&&(this.keys[e.code]=!0)}onKeyUp(e){e.code in this.keys&&(this.keys[e.code]=!1)}update(){e(this.moveDirection,this.keys.ArrowUp,this.keys.ArrowRight,this.keys.ArrowDown,this.keys.ArrowLeft),e(this.aimDirection,this.keys.KeyW,this.keys.KeyD,this.keys.KeyS,this.keys.KeyA)}}exports.InputController=t;
},{}],"KRDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugBase=void 0;class e{constructor(e,t,s){this.data=new Float32Array(s),this.gl=e,this.shader=t,this.vertBuffer=this.gl.createBuffer()}destroy(){this.gl.deleteBuffer(this.vertBuffer)}updateBuffer(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.data,this.gl.DYNAMIC_DRAW)}prepareRender(e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertBuffer),this.shader.position.enable(),this.shader.position.set(2,this.gl.FLOAT,!1,0,0),this.shader.color.setV(e)}}exports.DebugBase=e;
},{}],"lZI9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugCircle=void 0;const t=require("./DebugBase");class e extends t.DebugBase{constructor(t,e,s){super(t,e,4+2*s)}set(t,e,s){this.data[0]=t,this.data[1]=e;const a=this.data.length/2-2,r=2*Math.PI/a;let h=0;for(let i=0;i<a;i++)this.data[2*i+2]=t+s*Math.cos(h),this.data[2*i+3]=e+s*Math.sin(h),h+=r;return this.data[this.data.length-2]=this.data[2],this.data[this.data.length-1]=this.data[3],this.updateBuffer(),this}fill(t){this.prepareRender(t),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,this.data.length/2)}stroke(t){this.prepareRender(t),this.gl.drawArrays(this.gl.LINE_LOOP,2,this.data.length/2-2)}}exports.DebugCircle=e;
},{"./DebugBase":"KRDx"}],"jUBF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameCue=void 0;const e=require("./constants"),r=require("./draw/DebugCircle"),t=require("./draw/Sprite");class i{constructor(e,i,s,u,o,c,d){const{gl:n,debugShader:h,defaultShader:l}=e;this.x=s,this.y=u,this.innerRadius=o,this.outerRadius=c,this.zoom=d,this.innerCircle=new r.DebugCircle(n,h,20).set(s,u,o),this.outerCircle=new r.DebugCircle(n,h,20).set(s,u,c),this.burstSprite=new t.Sprite(n,l,i.texture),this.burstSprite.set(s,u,i.width,i.height,0)}draw(){this.burstSprite.draw()}drawDebug(r,t){r&&this.innerCircle.stroke(e.influencedModecolors.CUE_INNER),t&&this.outerCircle.stroke(e.influencedModecolors.CUE_OUTER)}}exports.GameCue=i;
},{"./constants":"eKDL","./draw/DebugCircle":"lZI9","./draw/Sprite":"wVJg"}],"EG2w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugRect=void 0;const t=require("./DebugBase");class e extends t.DebugBase{constructor(t,e){super(t,e,8)}set(t,e,s,a){const r=t+s,i=e+a;let d=0;return this.data[d++]=t,this.data[d++]=i,this.data[d++]=t,this.data[d++]=e,this.data[d++]=r,this.data[d++]=e,this.data[d++]=r,this.data[d++]=i,this.updateBuffer(),this}fill(t){this.prepareRender(t),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4)}stroke(t){this.prepareRender(t),this.gl.drawArrays(this.gl.LINE_LOOP,0,4)}}exports.DebugRect=e;
},{"./DebugBase":"KRDx"}],"pvcJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugCrosshair=void 0;const t=require("./DebugBase"),s=require("../constants");class e extends t.DebugBase{constructor(t,s){super(t,s,8)}set(t,e,a,r){const i=r*s.DEG_TO_RAD,h=Math.cos(i)*a,o=Math.sin(i)*a,d=(r+90)*s.DEG_TO_RAD,u=Math.cos(d)*a,n=Math.sin(d)*a;let c=0;return this.data[c++]=t+h,this.data[c++]=e+o,this.data[c++]=t-h,this.data[c++]=e-o,this.data[c++]=t+u,this.data[c++]=e+n,this.data[c++]=t-u,this.data[c++]=e-n,this.updateBuffer(),this}stroke(t){this.prepareRender(t),this.gl.drawArrays(this.gl.LINES,0,4)}}exports.DebugCrosshair=e;
},{"./DebugBase":"KRDx","../constants":"eKDL"}],"MgEL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractMode=void 0;const e=require("../constants"),r=require("../draw/DebugCircle"),s=require("../draw/DebugRect"),t=require("../draw/DebugCrosshair");class a{constructor(a,i,c){this.game=a,this.player=i,this.camera=c,this.circle=new r.DebugCircle(a.gl,a.debugShader,20),this.crosshair=new t.DebugCrosshair(a.gl,a.debugShader),this.rect=new s.DebugRect(a.gl,a.debugShader),this.camera.resize(e.SCREEN_WIDTH,e.SCREEN_HEIGHT),this.camera.setZoom(.5),this.camera.setBounds(e.WORLD_BOUNDS)}onDisable(){}onEnable(){}update(e){}draw(){}drawDebug(){this.game.ui.boundaries.checked&&(this.rect.set(0,0,e.WORLD_WIDTH,e.WORLD_HEIGHT),this.rect.stroke(e.namedColors.RED))}}exports.AbstractMode=a;
},{"../constants":"eKDL","../draw/DebugCircle":"lZI9","../draw/DebugRect":"EG2w","../draw/DebugCrosshair":"pvcJ"}],"XpAJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugCheckbox=void 0;const e=document.getElementById("legend");class t{constructor(t,c){this.label=document.createElement("label"),this.checkbox=document.createElement("input"),this.checkbox.type="checkbox",this.checkbox.checked=!0,this.label.appendChild(this.checkbox);const h=document.createElement("span");if(h.textContent=t,c){const e=Math.round(255*c[0]),t=Math.round(255*c[1]),o=Math.round(255*c[2]),s=c[3].toFixed(2);h.style.color="rgba(".concat(e,", ").concat(t,", ").concat(o,", ").concat(s,")")}this.label.appendChild(h),e.appendChild(this.label),this.hide()}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e}show(){return this.label.style.display="",this}hide(){return this.label.style.display="none",this}}exports.DebugCheckbox=t;
},{}],"FOG1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NumberOption=void 0;const t=document.getElementById("options");class e{constructor(e,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.label=document.createElement("label"),this.fractionDigits=s;const n=document.createElement("span");n.textContent="".concat(e,":"),this.label.appendChild(n),this.input=document.createElement("input"),this.input.type="number";for(const t of Object.keys(i)){const e=i[t];void 0!==e&&(this.input[t]=e)}this.label.appendChild(this.input),t.appendChild(this.label),this.hide()}get value(){return parseFloat(this.input.value)}set value(t){this.input.value=t.toFixed(this.fractionDigits)}show(){return this.label.style.display="",this}hide(){return this.label.style.display="none",this}addListener(t){this.input.addEventListener("input",()=>{const{value:e}=this;e>0&&t(e)})}}exports.NumberOption=e;
},{}],"hnBc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InfluencedMode=void 0;const e=require("../../src"),t=require("../constants"),n=require("../GameCue"),i=require("./AbstractMode"),c=require("../ui/DebugCheckbox"),u=require("../ui/NumberOption");class r extends i.AbstractMode{constructor(i,r,o){super(i,r,new e.InfluencedCamera),this.ui={offset:new c.DebugCheckbox("⨉ Offset (due to target change)",t.influencedModecolors.OFFSET),targetProjected:new c.DebugCheckbox("☐ Target Projected",t.influencedModecolors.TARGET_PROJECTED),targetAim:new c.DebugCheckbox("☐ Target Aim",t.influencedModecolors.TARGET_AIM),cueInner:new c.DebugCheckbox("◯ Cue Inner Radius",t.influencedModecolors.CUE_INNER),cueOuter:new c.DebugCheckbox("◯ Cue Outer Radius",t.influencedModecolors.CUE_OUTER),maxVelocityInfluence:new u.NumberOption("Max Velocity Influence",{min:"0"}),velocityInfluenceFactor:new u.NumberOption("Velocity Influence Factor",{min:"0",step:"0.1"}),maxAimInfluence:new u.NumberOption("Max Aim Influence",{min:"0"}),aimInfluenceFactor:new u.NumberOption("Aim Influence Factor",{min:"0",step:"0.1"}),aimInfluenceLerp:new u.NumberOption("Aim Influence Lerp",{min:"0",max:"1",step:"0.1"}),currentZoom:new u.NumberOption("Current Zoom",{disabled:!0,type:"text"},3)},this.cues=[],this.addCue(new n.GameCue(i,o,t.WORLD_WIDTH/2+500,t.WORLD_HEIGHT/2-500,200,1e3,.6)),this.addCue(new n.GameCue(i,o,t.WORLD_WIDTH/3,t.WORLD_HEIGHT-450,200,600,1.4)),this.camera.setTarget(r),this.ui.maxVelocityInfluence.value=r.velocityInfluence.maxLength,this.ui.velocityInfluenceFactor.value=r.velocityInfluence.factor,this.ui.maxAimInfluence.value=r.aimInfluence.maxLength,this.ui.aimInfluenceFactor.value=r.aimInfluence.factor,this.ui.aimInfluenceLerp.value=r.aimInfluence.lerpFactor,this.ui.maxVelocityInfluence.addListener(e=>r.velocityInfluence.maxLength=e),this.ui.velocityInfluenceFactor.addListener(e=>r.velocityInfluence.factor=e),this.ui.maxAimInfluence.addListener(e=>r.aimInfluence.maxLength=e),this.ui.aimInfluenceFactor.addListener(e=>r.aimInfluence.factor=e),this.ui.aimInfluenceLerp.addListener(e=>r.aimInfluence.lerpFactor=e)}addCue(e){this.cues.push(e),this.camera.addCue(e)}onDisable(){for(const e of Object.keys(this.ui))this.ui[e].hide();this.player.removeRocket()}onEnable(){for(const e of Object.keys(this.ui))this.ui[e].show()}update(e){this.camera.update(e),this.ui.currentZoom.value=this.camera.getZoom()}draw(){for(const e of this.cues)e.draw()}drawDebug(){super.drawDebug();for(const t of this.cues)t.drawDebug(this.ui.cueInner.checked,this.ui.cueOuter.checked);const e=this.camera.getTarget();if(e&&this.ui.offset.checked){const{x:n,y:i}=this.camera.getOffset();this.crosshair.set(e.x+n,e.y+i,16,45),this.crosshair.stroke(t.influencedModecolors.OFFSET)}this.ui.targetProjected.checked&&this.player.drawDebugProjected(this.rect),this.ui.targetAim.checked&&this.player.drawDebugAim(this.rect)}}exports.InfluencedMode=r;
},{"../../src":"fUdq","../constants":"eKDL","../GameCue":"jUBF","./AbstractMode":"MgEL","../ui/DebugCheckbox":"XpAJ","../ui/NumberOption":"FOG1"}],"UnXq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xyToAngle=exports.vectorToAngle=exports.positiveNumListener=void 0;const e=require("./constants");function t(e,t){e.addEventListener("input",()=>{const o=parseFloat(e.value);o>0&&t(o)})}function o(e){return n(e.x,e.y)}function n(t,o){if(0===t&&0===o)return 0;let n=Math.atan2(t,-o)*e.RAD_TO_DEG;return n<0&&(n+=360),n}exports.positiveNumListener=t,exports.vectorToAngle=o,exports.xyToAngle=n;
},{"./constants":"eKDL"}],"dBq8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rocket=void 0;const t=require("../src"),i=require("./constants"),e=require("./draw/Sprite"),s=require("./utils"),h=.3;class r{constructor(s,r,o){this.lastValidDirection={x:0,y:0},this.velocity={x:0,y:0},this.velocityInfluence=new t.AimInfluence({maxLength:200,factor:.2}),this.aims=[],this.zoom=1.5,this.spawnTime=h,this.lastValidDirection.x=o.x,this.lastValidDirection.y=o.y,this.x=r.x+this.lastValidDirection.x*i.ROCKET_PREVIEW_OFFSET,this.y=r.y+this.lastValidDirection.y*i.ROCKET_PREVIEW_OFFSET,this.game=s,this.sprite=new e.Sprite(s.gl,s.defaultShader,s.textures.rocket.texture),this.aims.push(this.velocityInfluence)}update(e,s){let h=s.x,r=s.y;0===h&&0===r?(h=this.lastValidDirection.x,r=this.lastValidDirection.y):(this.lastValidDirection.x=h,this.lastValidDirection.y=r),t.lerpVector(this.velocity,h*i.ROCKET_SPEED,r*i.ROCKET_SPEED,.03),this.velocityInfluence.set(this.velocity.x,this.velocity.y),this.x+=this.velocity.x*e,this.y+=this.velocity.y*e,(this.x<0||this.x>=i.WORLD_WIDTH||this.y<0||this.y>=i.WORLD_HEIGHT)&&this.game.player.removeRocket(),this.spawnTime>0&&(this.spawnTime=Math.max(0,this.spawnTime-e))}draw(){const t=this.getScale(),{width:i,height:e}=this.game.textures.rocket,h=s.vectorToAngle(this.velocity);this.sprite.set(this.x,this.y,i*t,e*t,h),this.sprite.draw()}drawDebugProjected(t){const{x:e,y:s}=this.velocityInfluence.get();t.set(this.x+e-i.ROCKET_SIZE,this.y+s-i.ROCKET_SIZE,2*i.ROCKET_SIZE,2*i.ROCKET_SIZE),t.stroke(i.influencedModecolors.TARGET_PROJECTED)}getScale(){const t=1-this.spawnTime/h;return i.ROCKET_PREVIEW_SCALE+t*(i.ROCKET_SCALE-i.ROCKET_PREVIEW_SCALE)}}exports.Rocket=r;
},{"../src":"fUdq","./constants":"eKDL","./draw/Sprite":"wVJg","./utils":"UnXq"}],"lbff":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;const t=require("../src"),e=require("./constants"),i=require("./draw/Sprite"),s=require("./InputController"),r=require("./modes/InfluencedMode"),o=require("./Rocket"),h=require("./utils"),n=.3;class c{constructor(r){this.x=e.WORLD_WIDTH/2,this.y=e.WORLD_HEIGHT/2,this.velocity={x:0,y:0},this.velocityInfluence=new t.AimInfluence({maxLength:300,factor:.2}),this.aimInfluence=new t.AimInfluence({maxLength:300,factor:.3,lerpFactor:.1}),this.aims=[],this.zoom=1,this.spawnTime=n,this.rocket=null,this.input=new s.InputController(this),this.game=r,this.sprite=new i.Sprite(r.gl,r.defaultShader,r.textures.player.texture),this.rocketSprite=new i.Sprite(r.gl,r.defaultShader,r.textures.rocket.texture),this.aims.push(this.velocityInfluence),this.aims.push(this.aimInfluence)}teleport(){if(!this.rocket){for(let t=0;t<10;t++){const t=e.BOUND_DISTANCE+Math.random()*(e.WORLD_WIDTH-2*e.BOUND_DISTANCE),i=e.BOUND_DISTANCE+Math.random()*(e.WORLD_HEIGHT-2*e.BOUND_DISTANCE);if(Math.sqrt(Math.pow(t-this.x,2)+Math.pow(i-this.y,2))>500)return this.x=t,this.y=i,void(this.spawnTime=n)}console.log("Could not find a new spot far away enough")}}shootRocket(){if(this.rocket)this.removeRocket();else if(this.input.aimDirection.x||this.input.aimDirection.y){const{camera:e}=this.game.mode;e instanceof t.InfluencedCamera&&(this.rocket=new o.Rocket(this.game,this,this.input.aimDirection),e.setTarget(this.rocket))}}removeRocket(){this.rocket=null;const{camera:e}=this.game.mode;e instanceof t.InfluencedCamera&&e.setTarget(this)}update(i){this.input.update();let s=e.PLAYER_SPEED;this.rocket&&(s=0,t.lerpVector(this.velocity,0,0),this.aimInfluence.set(0,0),this.rocket.update(i,this.input.aimDirection)),t.lerpVector(this.velocity,this.input.moveDirection.x*s,this.input.moveDirection.y*s),this.aimInfluence.set(this.input.aimDirection.x*s,this.input.aimDirection.y*s),this.velocityInfluence.set(this.velocity.x,this.velocity.y),this.x=Math.max(e.BOUND_DISTANCE,Math.min(e.WORLD_WIDTH-e.BOUND_DISTANCE,this.x+this.velocity.x*i)),this.y=Math.max(e.BOUND_DISTANCE,Math.min(e.WORLD_HEIGHT-e.BOUND_DISTANCE,this.y+this.velocity.y*i)),this.spawnTime>0&&(this.spawnTime=Math.max(0,this.spawnTime-i))}draw(){const t=this.getScale(),{width:i,height:s}=this.game.textures.player;this.sprite.set(this.x,this.y,i*t,s*t,this.velocity.x/e.PLAYER_SPEED*25),this.sprite.draw(),this.rocket?this.rocket.draw():this.game.mode instanceof r.InfluencedMode&&(this.input.aimDirection.x||this.input.aimDirection.y)&&this.drawPreviewRocket()}drawPreviewRocket(){let{x:t,y:i}=this.aimInfluence.get();const s=1/Math.sqrt(Math.pow(t,2)+Math.pow(i,2));t*=s,i*=s;const{width:r,height:o}=this.game.textures.rocket,n=h.xyToAngle(t,i);this.rocketSprite.set(this.x+t*e.ROCKET_PREVIEW_OFFSET,this.y+i*e.ROCKET_PREVIEW_OFFSET,r*e.ROCKET_PREVIEW_SCALE,o*e.ROCKET_PREVIEW_SCALE,n),this.rocketSprite.draw()}drawDebugProjected(t){if(this.rocket)this.rocket.drawDebugProjected(t);else{const{x:i,y:s}=this.velocityInfluence.get();t.set(this.x+i-e.PLAYER_SIZE,this.y+s-e.PLAYER_SIZE,2*e.PLAYER_SIZE,2*e.PLAYER_SIZE),t.stroke(e.influencedModecolors.TARGET_PROJECTED)}}drawDebugAim(t){if(!this.rocket){const{x:i,y:s}=this.aimInfluence.get();t.set(this.x+i-e.AIM_SIZE,this.y+s-e.AIM_SIZE,2*e.AIM_SIZE,2*e.AIM_SIZE),t.stroke(e.influencedModecolors.TARGET_AIM)}}getScale(){return 1-this.spawnTime/n}}exports.Player=c;
},{"../src":"fUdq","./constants":"eKDL","./draw/Sprite":"wVJg","./InputController":"T4KM","./modes/InfluencedMode":"hnBc","./Rocket":"dBq8","./utils":"UnXq"}],"xSX7":[function(require,module,exports) {
"use strict";var e,t;function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDefaultShader=void 0;const i=require("typed-glsl"),n=i.glsl(e||(e=r(["\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvoid main() {\n    vUV = uv;\n    gl_Position = uPMatrix * uMVMatrix * vec4(position, 0.0, 1.0);\n}\n"]))),u=i.glsl(t||(t=r(["\nprecision highp float;\nvarying vec2 vUV;\nuniform sampler2D textureID;\nuniform vec2 uvOffset;\n\nvoid main() {\n    gl_FragColor = texture2D(textureID, vUV + uvOffset);\n}\n"])));function o(e){return i.createShaderProgram(e,n,u,{position:"vertexAttribPointer",uv:"vertexAttribPointer",uMVMatrix:"uniformMatrix4f",uPMatrix:"uniformMatrix4f",textureID:"uniform1i",uvOffset:"uniform2f"})}exports.createDefaultShader=o;
},{"typed-glsl":"V8tp"}],"Epdd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FollowingMode=void 0;const e=require("../../src"),i=require("../constants"),s=require("./AbstractMode"),t=require("../ui/DebugCheckbox"),a=require("../ui/NumberOption");class o extends s.AbstractMode{constructor(s,o){super(s,o,new e.FollowingCamera),this.ui={cameraDesired:new t.DebugCheckbox("⨉ Camera Desired",i.followingModeColors.CAMERA_DESIRED),cameraSlowDistance:new t.DebugCheckbox("◯ Camera Slow Distance",i.followingModeColors.SLOW_DISTANCE),maxSpeed:new a.NumberOption("Max Speed",{min:"0.01"}),acceleration:new a.NumberOption("Acceleration",{min:"0.01"}),slowDistance:new a.NumberOption("Slow Distance",{min:"0"}),lockDistance:new a.NumberOption("Lock Distance",{min:"0"}),speed:new a.NumberOption("Speed",{disabled:!0,type:"text"})},this.camera.acceleration=40,this.camera.slowDistance=200;const{camera:c}=this;this.ui.maxSpeed.value=c.maxSpeed,this.ui.acceleration.value=c.acceleration,this.ui.slowDistance.value=c.slowDistance,this.ui.lockDistance.value=c.lockDistance,this.ui.maxSpeed.addListener(e=>c.maxSpeed=e),this.ui.acceleration.addListener(e=>c.acceleration=e),this.ui.slowDistance.addListener(e=>c.slowDistance=e),this.ui.lockDistance.addListener(e=>c.lockDistance=e)}onDisable(){for(const e of Object.keys(this.ui))this.ui[e].hide()}onEnable(){for(const i of Object.keys(this.ui))this.ui[i].show();const{camera:e}=this;e.moveTo(this.player.x,this.player.y),e.moveInstantly()}update(e){this.camera.moveTo(this.player.x,this.player.y),this.camera.update(e),this.ui.speed.value=this.camera.getSpeed()}drawDebug(){super.drawDebug();const{x:e,y:s}=this.camera.getDesired();this.ui.cameraDesired.checked&&(this.crosshair.set(e,s,16,45),this.crosshair.stroke(i.followingModeColors.CAMERA_DESIRED)),this.ui.cameraSlowDistance.checked&&(this.circle.set(e,s,this.camera.slowDistance),this.circle.stroke(i.followingModeColors.SLOW_DISTANCE))}}exports.FollowingMode=o;
},{"../../src":"fUdq","../constants":"eKDL","./AbstractMode":"MgEL","../ui/DebugCheckbox":"XpAJ","../ui/NumberOption":"FOG1"}],"UJBM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleMode=void 0;const e=require("../../src"),r=require("./AbstractMode");class t extends r.AbstractMode{constructor(r,t){super(r,t,new e.Camera)}onEnable(){this.camera.moveTo(this.player.x,this.player.y)}update(){this.camera.moveTo(this.player.x,this.player.y)}}exports.SimpleMode=t;
},{"../../src":"fUdq","./AbstractMode":"MgEL"}],"jKSw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;const e=require("../src"),t=require("./constants"),s=require("./shaders/DebugShader"),r=require("./Player"),i=require("./draw/Sprite"),a=require("./shaders/DefaultShader"),o=require("./draw/DebugCrosshair"),d=require("./modes/InfluencedMode"),h=require("./modes/FollowingMode"),n=require("./modes/SimpleMode"),u=require("./ui/DebugCheckbox"),c=require("./ui/NumberOption");function m(e,t){t.use(),t.uMVMatrix.set(!1,e.modelView),t.uPMatrix.set(!1,e.projection)}class l{constructor(m,l,E){this.ui={cameraCurrent:new u.DebugCheckbox("＋ Camera Current",t.defaultColors.CAMERA).show(),boundaries:new u.DebugCheckbox("☐ World Boundaries",t.defaultColors.CAMERA).show(),zoom:new c.NumberOption("Zoom",{min:"0.125",max:"8",value:"0.5",step:"0.125"}).show(),debug:document.getElementById("debug")},this.textures=E,this.gl=l,l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE),l.enable(l.BLEND),this.debugShader=s.createDebugShader(l),this.defaultShader=a.createDefaultShader(l),this.crosshair=new o.DebugCrosshair(l,this.debugShader),this.heartSprite=new i.Sprite(l,this.defaultShader,E.heart.texture),this.bgSprite=new i.Sprite(l,this.defaultShader,E.bg.texture),this.bgSprite.set(t.WORLD_WIDTH/2,t.WORLD_HEIGHT/2,t.WORLD_WIDTH,t.WORLD_HEIGHT,0),m.width=t.SCREEN_WIDTH,m.height=t.SCREEN_HEIGHT,l.viewport(0,0,t.SCREEN_WIDTH,t.SCREEN_HEIGHT),this.player=new r.Player(this),this.modes={simple:new n.SimpleMode(this,this.player),influenced:new d.InfluencedMode(this,this.player,E.burst),following:new h.FollowingMode(this,this.player)},this.screenCamera=new e.ScreenCamera,this.screenCamera.resize(t.SCREEN_WIDTH,t.SCREEN_HEIGHT);const p=document.getElementById("mode");p.value="influenced",p.addEventListener("change",()=>{this.setMode(p.value)}),this.setMode(p.value);const g=document.getElementById("snapToPixel");g.checked=this.mode.camera.snapToPixel,g.addEventListener("input",()=>{for(const e of Object.keys(this.modes))this.modes[e].camera.snapToPixel=g.checked});const S=document.getElementById("useBounds");S.checked=!!this.mode.camera.getBounds(),S.addEventListener("input",()=>{const e=S.checked?t.WORLD_BOUNDS:null;for(const t of Object.keys(this.modes))this.modes[t].camera.setBounds(e)}),this.mode.camera.setZoom(this.ui.zoom.value),this.ui.zoom.addListener(e=>{for(const t of Object.keys(this.modes))this.modes[t].camera.setZoom(e)});const b=document.getElementById("sidebar");b.addEventListener("keydown",e=>e.stopImmediatePropagation()),b.addEventListener("keyup",e=>e.stopImmediatePropagation()),b.addEventListener("keypress",e=>e.stopImmediatePropagation())}setMode(e){var t;const s=this.modes[e];s&&(null===(t=this.mode)||void 0===t||t.onDisable(),this.mode=s,s.onEnable())}update(e){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.player.update(e),this.mode.update(e),m(this.mode.camera,this.defaultShader);const s=this.mode.camera.getX(),r=this.mode.camera.getY(),i=t.WORLD_CENTER_X-.75*(t.WORLD_CENTER_X-s),a=t.WORLD_CENTER_Y-.75*(t.WORLD_CENTER_Y-r);this.bgSprite.set(i,a,t.BG_WIDTH,t.BG_HEIGHT,0),this.bgSprite.draw(),this.mode.draw(),this.player.draw(),this.ui.debug.checked&&(m(this.mode.camera,this.debugShader),this.mode.drawDebug(),this.ui.cameraCurrent.checked&&(this.crosshair.set(s,r,16,0),this.crosshair.stroke(t.defaultColors.CAMERA))),m(this.screenCamera,this.defaultShader);const o=this.textures.heart.width,d=this.textures.heart.height;for(let t=0;t<3;t++)this.heartSprite.set(5+o/2+(5+o)*t,5+d/2,o,d,0),this.heartSprite.draw()}}exports.Game=l;
},{"../src":"fUdq","./constants":"eKDL","./shaders/DebugShader":"e1KN","./Player":"lbff","./draw/Sprite":"wVJg","./shaders/DefaultShader":"xSX7","./draw/DebugCrosshair":"pvcJ","./modes/InfluencedMode":"hnBc","./modes/FollowingMode":"Epdd","./modes/SimpleMode":"UJBM","./ui/DebugCheckbox":"XpAJ","./ui/NumberOption":"FOG1"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function u(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}c((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("./Game");function n(t,n){return e(this,void 0,void 0,function*(){const e=yield new Promise((e,n)=>{const r=new Image;r.onload=(()=>e(r)),r.onerror=(e=>n(e)),r.src=t}),r=n.createTexture();return n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),{width:e.width,height:e.height,texture:r}})}function r(t){return e(this,void 0,void 0,function*(){return{bg:yield n("/background.jpg",t),player:yield n("/shipPink_manned.png",t),heart:yield n("/heart.png",t),burst:yield n("/laserGreen_burst.png",t),rocket:yield n("/rocket.png",t)}})}const i=1/60;function o(){return e(this,void 0,void 0,function*(){const e=document.getElementById("canvas"),n=e.getContext("webgl"),o=yield r(n),a=new t.Game(e,n,o);let u=0,c=performance.now();window.requestAnimationFrame(function e(){const t=performance.now();for(u+=(t-c)/1e3,c=t;u>=i;)a.update(i),u-=i;window.requestAnimationFrame(e)})})}o();
},{"./Game":"jKSw"}]},{},["QCba"], null)